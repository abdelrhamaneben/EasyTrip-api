<div class="container-fluid">
	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">Category</h1>
		</div>
		<!-- /.col-lg-12 -->


		<div class="panel-heading">
			Ajouter une nouvelle categorie
		</div>
		<div class="panel-body">
			<div class="row">
				<div class="col-lg-8">
					<form role="form">

						<!-- INPUT TEXT -->
						<div class="form-group">
							<label for="category_name">Nom de la categorie *</label>
							<input class="form-control" id="category_name">
							<p class="help-block">Example: Voyage, sport, culture</p>
						</div>

						<!-- TEXT AREA -->
						<div class="form-group">
							<label for="category_description">Description de la categorie *</label>
							<textarea class="form-control" rows="3" id="category_description"></textarea>
						</div>

						<!-- FILE INPUT -->
						<div class="form-group">
							<label for="category_image">Image principale de la categorie *</label>
							<input type="file" id="category_image">
						</div>

						<p class="help-block">Les champs marques d'un * sont obligatoire</p>

						<!-- SUBMIT BUTTON -->
						<button type="submit" id="submit" class="btn btn-default">Ajouter une categorie</button>

						<!-- RESET BUTTON -->
						<button type="reset" class="btn btn-default">Annuler</button>


						<!-- INPUT TEXT PLACEHOLDER -->
						<!--<div class="form-group">
							<label>Text Input with Placeholder</label>
							<input class="form-control" placeholder="Enter text">
						</div>

						<!-- STATIC CONTROL (=LABEL) -->
						<!--<div class="form-group">
							<label>Static Control</label>
							<p class="form-control-static">email@example.com</p>
						</div>

						<!-- FILE INPUT -->
						<!--<div class="form-group">
							<label>File input</label>
							<input type="file">
						</div>

						<!-- TEXT AREA -->
						<!--<div class="form-group">
							<label>Text area</label>
							<textarea class="form-control" rows="3"></textarea>
						</div>

						<!-- CHECK BOXES -->
						<!--<div class="form-group">
							<label>Checkboxes</label>
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">Checkbox 1
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">Checkbox 2
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">Checkbox 3
								</label>
							</div>
						</div>

						<!-- INLINE CHECK BOXES -->
						<!--<div class="form-group">
							<label>Inline Checkboxes</label>
							<label class="checkbox-inline">
								<input type="checkbox">1
							</label>
							<label class="checkbox-inline">
								<input type="checkbox">2
							</label>
							<label class="checkbox-inline">
								<input type="checkbox">3
							</label>
						</div>

						<!-- RADIO BUTTONS -->
						<!--<div class="form-group">
							<label>Radio Buttons</label>
							<div class="radio">
								<label>
									<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>Radio 1
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">Radio 2
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">Radio 3
								</label>
							</div>
						</div>

						<!-- INLINE RADIO BUTTONS -->
						<!--<div class="form-group">
							<label>Inline Radio Buttons</label>
							<label class="radio-inline">
								<input type="radio" name="optionsRadiosInline" id="optionsRadiosInline1" value="option1" checked>1
							</label>
							<label class="radio-inline">
								<input type="radio" name="optionsRadiosInline" id="optionsRadiosInline2" value="option2">2
							</label>
							<label class="radio-inline">
								<input type="radio" name="optionsRadiosInline" id="optionsRadiosInline3" value="option3">3
							</label>
						</div>

						<!-- LISTE DEROULANTE -->
						<!--<div class="form-group">
							<label>Selects</label>
							<select class="form-control">
								<option>1</option>
								<option>2</option>
								<option>3</option>
								<option>4</option>
								<option>5</option>
							</select>
						</div>

						<!-- MULTIPLE SELECT -->
						<!--<div class="form-group">
							<label>Multiple Selects</label>
							<select multiple class="form-control">
								<option>1</option>
								<option>2</option>
								<option>3</option>
								<option>4</option>
								<option>5</option>
							</select>
						</div>

						<!-- SUBMIT BUTTON -->
						<!--<button type="submit" class="btn btn-default">Submit Button</button>

						<!-- RESET BUTTON -->
						<!--<button type="reset" class="btn btn-default">Reset Button</button>-->
					</form>
				</div>


	</div>
	<!-- /.row -->
</div>

 <script>

	var category_image_blob = "";
	var fileInput = document.querySelector('#category_image');
	fileInput.addEventListener('change', function() {
	    var reader = new FileReader();
	    reader.addEventListener('load', function() {
	        //console.log('Contenu du fichier "' + fileInput.files[0].name + '" :\n\n' + reader.result);
			category_image_blob = reader.result;
	    }, false);
	    reader.readAsDataURL(fileInput.files[0]);
	}, false);

    $("#submit").click(function(e) {
        e.preventDefault();
        var category_name = $("#category_name").val();
        var category_description = $("#category_description").val();


        var data = '{'
          +'"name" : "' + category_name + '",'
          +'"image" : "' + category_image_blob + '",'
          +'"description" : "' + category_description + '"'
        +'}';

        console.log(data);
        $.ajax({
              method : "POST",
              url : "http://localhost:1337/category",
              data : data,
              dataType : "json",
              contentType : "application/json"
        });
    });

 </script>



